#### Требования к API

1. **Изолированный запуск кода**:
   - Код будет приходить в формате base64.
   - Код должен выполняться в изолированном окружении (например, в Docker контейнере) для обеспечения безопасности.
   - Каждый запрос должен запускаться в отдельном Docker контейнере.
   - Контейнер не должен иметь доступ к файловой системе и сети.
   - После выполнения тестов контейнер должен удаляться.

2. **Тестирование решений**:
   - Тесты будут приходить в формате JSON массива пар `in`, `expected_out`.
   - Необходимо хранить и обрабатывать тесты, а также запускать код и отслеживать на каком этапе он упал.

3. **Возврат результатов выполнения**:
   - Endpoint должен возвращать результат выполнения тестов, включая информацию о том, какие тесты были пройдены, время выполнения и использование памяти.
   - В случае ошибки выполнения кода, необходимо возвращать детальную причину (например, превышение времени выполнения, превышение памяти, неверный ответ и т.д.).

4. **Ограничение на количество контейнеров**:
   - На сервере должно быть ограничение на количество одновременно запускаемых контейнеров (например, 10 штук).
   - Должна быть реализована очередь запросов на выполнение кода. Если серверу пришло больше запросов, чем доступных контейнеров, запросы должны быть поставлены в очередь и выполняться по мере освобождения ресурсов.

#### Структура API

1. **Endpoint для запуска кода**:
   - **URL**: `/run_code`
   - **Метод**: `POST`
   - **Тело запроса**:
     ```json
     {
       "code": "base64_encoded_code",
       "tests": [
         {
           "in": "input_data",
           "expected_out": "expected_output"
         },
         ...
       ]
     }
     ```
   - **Ответ**:
     ```json
     {
       "status": "success" | "failure",
       "results": [
         {
           "test": {
             "in": "input_data",
             "expected_out": "expected_output"
           },
           "result": "passed" | "failed",
           "output": "actual_output",
           "error": "error_message_if_any",
           "execution_time": "time_in_seconds",
           "memory_usage": "memory_in_mb"
         },
         ...
       ],
       "error": "error_message_if_any"
     }
     ```

#### Технологический стек

1. **Язык программирования**: Python
2. **Веб-фреймворк для REST API**: Flask
3. **Контейнеризация и изоляция**:
   - Docker для изоляции выполнения кода в безопасных контейнерах с ограничениями по времени и памяти.
   - Docker Compose для управления зависимостями и упрощения развертывания сервиса.
4. **Очередь запросов**:
   - Использование библиотеки для управления очередями, например, `celery` или `rq` (Redis Queue).
   - Redis для хранения очереди задач и управления состоянием выполнения.
